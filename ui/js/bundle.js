(()=>{var p=class{position;hasTopWall;hasRightWall;hasBottomWall;hasLeftWall;visited;constructor(e,l){this.position={x:e,y:l},this.hasTopWall=!0,this.hasRightWall=!0,this.hasBottomWall=!0,this.hasLeftWall=!0,this.visited=!1}removeWall(e){let l=e.position.x-this.position.x,n=e.position.y-this.position.y;l===1?(this.hasRightWall=!1,e.hasLeftWall=!1):l===-1?(this.hasLeftWall=!1,e.hasRightWall=!1):n===1?(this.hasBottomWall=!1,e.hasTopWall=!1):n===-1&&(this.hasTopWall=!1,e.hasBottomWall=!1)}};var d=class{width;height;grid;constructor(e,l){this.width=e,this.height=l,this.grid=this.createGrid()}createGrid(){let e=[];for(let l=0;l<this.height;l++){let n=[];for(let a=0;a<this.width;a++)n.push(new p(a,l));e.push(n)}return e}getCell(e,l){return e<0||e>=this.width||l<0||l>=this.height?null:this.grid[l][e]}getNeighbors(e){let l=[],n=[[0,-1],[1,0],[0,1],[-1,0]];for(let[a,s]of n){let o=this.getCell(e.position.x+a,e.position.y+s);o&&!o.visited&&l.push(o)}return l}};var g=class{*generateSteps(e,l){let n=[l];for(l.visited=!0;n.length>0;){let a=n[n.length-1];yield{currentCell:a};let s=e.getNeighbors(a).filter(o=>!o.visited);if(s.length>0){let o=Math.floor(Math.random()*s.length),r=s[o];a.removeWall(r),r.visited=!0,n.push(r)}else n.pop()}}};function M(t,e,l){t.clearRect(0,0,t.canvas.width,t.canvas.height);let n=t.canvas.width/e.width,a=t.canvas.height/e.height;t.strokeStyle="black",t.lineWidth=2;for(let s=0;s<e.height;s++)for(let o=0;o<e.width;o++){let r=e.getCell(o,s);r.visited&&(t.fillStyle="rgba(200, 200, 200, 0.5)",t.fillRect(o*n,s*a,n,a)),l&&o===l.x&&s===l.y&&(t.fillStyle="rgba(0, 0, 255, 0.5)",t.fillRect(o*n,s*a,n,a)),L(t,r,o,s,n,a)}}function L(t,e,l,n,a,s){let o=l*a,r=n*s;t.beginPath(),e.hasTopWall&&(t.moveTo(o,r),t.lineTo(o+a,r)),e.hasRightWall&&(t.moveTo(o+a,r),t.lineTo(o+a,r+s)),e.hasBottomWall&&(t.moveTo(o,r+s),t.lineTo(o+a,r+s)),e.hasLeftWall&&(t.moveTo(o,r),t.lineTo(o,r+s)),t.stroke()}var w=document.getElementById("algorithm-select"),f=document.getElementById("step-slider"),u=document.getElementById("slider-wrapper"),v=document.getElementById("generate-button"),E=document.getElementById("maze-canvas"),W=E.getContext("2d"),h,c=[],m=0,C=!1,I=null,i=null;function b(){if(h=new d(20,20),c=[],m=0,!i){let t=Math.floor(Math.random()*h.width),e=Math.floor(Math.random()*h.height);i=h.getCell(t,e)}i&&(i.visited=!0),c.push({maze:T(h),currentCell:i}),y()}function B(){return w.value==="dfs"&&i?new g().generateSteps(h,i):null}function T(t){let e=new d(t.width,t.height);for(let l=0;l<t.height;l++)for(let n=0;n<t.width;n++){let a=t.getCell(n,l),s=e.getCell(n,l);a&&s&&(s.hasTopWall=a.hasTopWall,s.hasRightWall=a.hasRightWall,s.hasBottomWall=a.hasBottomWall,s.hasLeftWall=a.hasLeftWall,s.visited=a.visited)}return e}function y(){if(W&&c[m]){let{maze:t,currentCell:e}=c[m];M(W,t,e)}}function S(){if(C)return;C=!0,v.disabled=!0,z(),b();let t=B();t&&(I=window.setInterval(()=>{let e=t.next();if(e.done)R();else{let{currentCell:l}=e.value,n=T(h);c.push({maze:n,currentCell:l}),m=c.length-1,y()}},50))}function R(){I&&clearInterval(I),C=!1,v.disabled=!1,G(),f.max=(c.length-1).toString(),f.value=f.max}function k(t){let e=document.createElement("div");e.textContent=t,e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.padding="20px",e.style.backgroundColor="white",e.style.border="1px solid black",e.style.borderRadius="5px",e.style.zIndex="1000",document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)}function z(){f.disabled=!0,u.style.opacity="0.5",u.style.cursor="not-allowed"}function G(){f.disabled=!1,u.style.opacity="1",u.style.cursor="pointer"}w.addEventListener("change",()=>{i=null,b()});u.addEventListener("click",t=>{f.disabled&&(t.preventDefault(),k("Oops! Please generate a maze first."))});v.addEventListener("click",S);f.addEventListener("input",()=>{C||(m=parseInt(f.value),y())});b();z();})();
